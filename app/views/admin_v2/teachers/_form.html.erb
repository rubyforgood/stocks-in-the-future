<%= form_with model: @teacher, url: @teacher.persisted? ? admin_v2_teacher_path(@teacher) : admin_v2_teachers_path, builder: AdminV2::FormBuilder, class: "space-y-6" do |f| %>
  <div class="bg-white shadow-sm ring-1 ring-gray-900/5 rounded-lg">
    <div class="px-6 py-6">
      <h3 class="text-lg font-medium text-gray-900 mb-6">Teacher Details</h3>

      <%= f.text_field :username,
                       label: "Username",
                       hint: "Unique username for the teacher",
                       placeholder: "johndoe" %>

      <%= f.text_field :email,
                       label: "Email",
                       hint: "Email address (required for account setup)",
                       placeholder: "teacher@example.com" %>

      <%= f.text_field :name,
                       label: "Full Name",
                       hint: "Teacher's full name",
                       placeholder: "John Doe" %>

      <%= f.collection_check_boxes :classroom_ids,
                                   Classroom.order(:name),
                                   :id,
                                   :name,
                                   label: "Classrooms",
                                   hint: "Select one or more classrooms to assign to this teacher" %>

      <% if @teacher.new_record? %>
        <div class="mt-6 pt-6 border-t border-gray-200">
          <p class="text-sm text-gray-600">
            <i class="fas fa-info-circle mr-1"></i>
            A temporary password will be generated and a password reset email will be sent to the teacher's email address.
          </p>
        </div>
      <% end %>
    </div>
  </div>

  <div class="flex items-center justify-between gap-x-4">
    <div class="flex items-center gap-x-4">
      <%= f.cancel_button "Cancel", url: @teacher.persisted? ? admin_v2_teacher_path(@teacher) : admin_v2_teachers_path %>
      <%= f.submit_button @teacher.persisted? ? "Update Teacher" : "Create Teacher" %>
    </div>
    <% if @teacher.discarded? %>
      <%= link_to "Permanently Delete",
                  admin_v2_teacher_path(@teacher),
                  data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to permanently delete this teacher? This action cannot be undone." },
                  class: "inline-flex items-center px-4 py-2 border border-red-300 shadow-sm text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500" %>
    <% end %>
  </div>
<% end %>

<% chart_data = @portfolio.chart_data %>

<div class="bg-white rounded-[22px] border border-black/20 overflow-hidden">
  <div class="py-6 px-6">
    <h2 class="text-lg font-normal tracking-tight leading-none" style="font-family: 'Open Sans', system-ui, sans-serif; letter-spacing: -0.025em;">Total Portfolio Value Over Time</h2>
  </div>

  <div class="px-6 pb-6">
    <% if chart_data.length < 2 %>
      <!-- Empty State -->
      <div class="flex flex-col items-center justify-center py-12 text-center">
        <svg class="w-16 h-16 text-gray-300 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z" />
        </svg>
        <p class="text-gray-600 font-medium mb-1">Not Enough Data</p>
        <p class="text-sm text-gray-500 max-w-md">
          Your portfolio value chart will appear after at least 2 months of data have been recorded.
        </p>
      </div>
    <% else %>
      <!-- Chart -->
      <div class="relative" style="height: 300px;">
        <canvas
          data-controller="portfolio-chart"
          data-portfolio-chart-data-value="<%= chart_data.to_json %>"
        ></canvas>
      </div>
    <% end %>
  </div>
</div>
